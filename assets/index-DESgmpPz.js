(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const m={VIEWPORT_WIDTH:1280,VIEWPORT_HEIGHT:720,FPS:60,HIDE_CURSOR:!1};class p{canvas;ctx;fps;constructor(i,t={}){const o={...m,...t};if(this.canvas=i,this.ctx=i.getContext("2d"),this.ctx===null)throw new Error("Cannot get 2D context from canvas.");this.fps=o.FPS,this.canvas.width=o.VIEWPORT_WIDTH,this.canvas.height=o.VIEWPORT_HEIGHT,o.HIDE_CURSOR&&(this.canvas.style.cursor="none")}resize(i,t){this.canvas.width=i,this.canvas.height=t}render(i){const o=1e3/this.fps+.1;let s=performance.now(),n=0;const a=()=>{const d=performance.now(),f=d-s;requestAnimationFrame(a),f>=o&&(i(this.ctx,{currentFrame:n,viewport:{width:this.canvas.width,height:this.canvas.height}}),s=d-f%o,n++,n==this.fps&&(n=0))};return a()}}class y{position;size;color;visible;constructor(){this.size={width:0,height:0},this.color="black",this.visible=!0,console.log("Entity initialized.")}setSize(i,t){return this.size={width:i,height:t},this}setPosition(i,t){return this.position={x:i,y:t},this}setColor(i){return this.color=i,this}setVisible(i){return this.visible=i,this}draw(i){!this.visible||!this.position||(i.fillStyle=this.color,i.fillRect(this.position.x,this.position.y,this.size.width,this.size.height))}isInBound(i){return!(!this.position||i.x<this.position.x||i.x>=this.position.x+this.size.width||i.y<this.position.y||i.y>=this.position.y+this.size.height)}}function u(e){return new Promise(i=>{const t=new Image;t.onload=()=>{i(t)},t.onerror=()=>{throw new Error(`Image error: ${e}`)},t.src=e})}function v(e=window){const i={x:0,y:0,active:!1};return e.addEventListener("mousemove",t=>{if(t instanceof MouseEvent){const{clientX:o,clientY:s}=t;i.x=o,i.y=s,i.active=!0}}),e.addEventListener("mouseleave",()=>{i.active=!1}),i}const w=document.getElementById("mainframe"),h=v(w),c=await u("./diamond_sword.png"),E=await u("./scream.jpg"),g=new p(w,{VIEWPORT_WIDTH:window.innerWidth,VIEWPORT_HEIGHT:window.innerHeight,FPS:75,HIDE_CURSOR:!0}),I={x:0,y:500,size:10,speed:10,color:"red",direction:1,draw(e,i){e.fillStyle=this.color,e.fillRect(this.x,this.y,this.size,this.size),this.x+=this.speed*this.direction,(this.x<=0||this.x>=i.width-this.size)&&(this.direction*=-1)}},r=new y().setColor("green").setSize(300,150).setPosition(600,300);g.render((e,{currentFrame:i,viewport:t})=>{e.imageSmoothingEnabled=!1,e.clearRect(0,0,t.width,t.height),e.drawImage(E,130,30),I.draw(e,t),e.fillStyle="black",e.fillRect(0,0,122,24),e.fillStyle="yellow",e.font="24px Consolas, monospace, sans-serif",e.textAlign="left",e.textBaseline="top",e.fillText(`Frame: ${i}`,0,0),e.beginPath(),e.moveTo(300,550),e.lineTo(900,800),e.lineTo(900,700),e.lineWidth=5,e.strokeStyle="yellow",e.stroke(),e.beginPath(),e.moveTo(300,550),e.lineTo(900,700),e.lineWidth=5,e.strokeStyle="blue",e.stroke(),r.draw(e),h.active&&e.drawImage(c,h.x,h.y,c.width*4,c.height*4)});window.addEventListener("resize",()=>{const{innerWidth:e,innerHeight:i}=window;g.resize(e,i)});const l=10;window.addEventListener("keydown",e=>{if(e instanceof KeyboardEvent){const{code:i,repeat:t}=e;if(console.log(i,t),!r.position)return;const o={...r.position};({ArrowUp:()=>o.y+=-1*l,ArrowLeft:()=>o.x+=-1*l,ArrowDown:()=>o.y+=l,ArrowRight:()=>o.x+=l})[i].call(null),r.position=o}});window.addEventListener("click",e=>{if(e instanceof MouseEvent&&r.visible&&r.isInBound(h)){const i=Math.random()*255,t=Math.random()*255,o=Math.random()*255;r.setColor(`rgb(${i}, ${t}, ${o})`)}});
